---
globs: |
  frontend/**/*.{ts,tsx,js,jsx}
  frontend/**/global.css
alwaysApply: false
---
# Next.js Frontend Rules

Follow these rules when generating or modifying frontend code.

## 1. Reusable Components
- Extract reusable UI patterns into independent components or hooks **only when reused in 2+ places**.
- Avoid premature abstraction.
- Each component or hook must have a **single clear responsibility**.

## 2. File Naming & Style
- Use **kebab-case** for file names.
- Use **PascalCase** for React component names.
- Follow Prettier formatting strictly (project config in `.prettierrc`).
- Do not introduce custom formatting rules.
- Do not disable lint or formatting rules without team agreement.

## 3. State & Data Management
- Use **TanStack Query** for all server-side data fetching and caching.
- Never store server data in local React state, Zustand, or other global stores.
- Local state is allowed **only for UI state** (modals, tabs, form steps, etc.).
- Always handle **loading, success, empty, and error** states.
- Keep shared config, enums, labels, and logic centralized.
- Prefer fetching data in **Server Components** when possible.
- Use Client Components only for interactivity or browser-only APIs.

## 4. Forms & Validation
- Use **React Hook Form + Zod**.
- Each form must have a Zod schema.
- Schemas must be defined outside UI components.
- Schemas should be colocated in a `schemas.ts` or equivalent module.
- Validation errors must display clearly in the UI.

## 5. UI & Styling
- Use **shadcn/ui** as the primary component library.
- Customize via variants or composition, not ad-hoc styling.
- Tailwind utility classes are allowed for spacing, layout, and simple styling.
- Repeated or complex class combinations must be extracted into components or variants.
- Avoid inline styles and hard-coded colors unless strictly necessary.

## 6. Error Handling & UX Feedback
- Use toast notifications for user-facing errors and successes.
- Do not swallow errors silently.
- All async operations must have explicit error handling.
- Provide clear loading, empty, and error states.

## 7. Clarity & Maintainability
- Prefer explicit, readable code over clever one-liners.
- Separate concerns:
  - hooks → data & side effects
  - components → UI
  - schemas → validation
- Avoid deeply nested components and excessive prop drilling (3+ levels).
- Prefer composition, context, or hooks for shared logic.
